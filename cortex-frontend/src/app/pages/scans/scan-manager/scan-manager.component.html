<div class="grid-2">
  <app-card title="New Scan Task" subtitle="Define targets, select mode, and launch a new job.">
    <form (ngSubmit)="launch()">
      <label>Hosts</label>
      <textarea [(ngModel)]="hosts" name="hosts" rows="4" placeholder="one per line or space-separated"></textarea>
      <label>Ports</label>
      <input [(ngModel)]="ports" name="ports" placeholder="22,80,443 or 20-25" />
      <label>Mode</label>
      <app-mode-select name="mode" [(ngModel)]="mode"></app-mode-select>
      <button type="submit">Launch Scan</button>
    </form>
  </app-card>

  <app-card title="Scan History" subtitle="All tasks including running, pending, and completed.">
    <table class="table">
      <thead>
        <tr><th>Status</th><th>Targets</th><th>Ports</th><th>Mode</th><th>Submitted</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let t of (tasks$ | async)" [routerLink]="['/scans', t.id]">
          <td><span class="badge" [class.completed]="t.status==='completed'" [class.running]="t.status==='running'" [class.failed]="t.status==='failed'">{{t.status}}</span></td>
          <td><code>{{t.hosts.slice(0,3).join(', ')}}</code></td>
          <td><code>{{t.ports}}</code></td>
          <td>{{t.mode}}</td>
          <td>{{t.created_at || ''}}</td>
        </tr>
      </tbody>
    </table>
  </app-card>
</div>
